# Правила и контекст для AI-ассистента в проекте JS Пульс

# Основные инструкции, которым нужно следовать всегда.
Always:
  - |
    - Используй ТОЛЬКО `pnpm` как пакетный менеджер (версия 8.x).
    - Любое изменение, установка пакетов (`pnpm install`, `pnpm add`) или запуск скриптов (`pnpm run ...`) требуют явного предварительного согласования и одобрения.
    - Не оставляй закомментированный код.
    - Редактируй файлы только в стандартном редакторе кода.
    - Всегда сверяйся с полным `README.md` для получения наиболее актуальной и подробной информации о проекте, его структуре и процессах.
    - После рефакторинга или перемещения файлов/папок обязательно проверяй все импорты и ссылки на эти файлы во всем проекте и исправляй пути при необходимости.
    - На фронтенде используй axios для HTTP-запросов, на бэкенде - встроенный fetch.
    - Используй TypeScript для типизации кода.
    - **В сложных случаях, особенно при работе с внешними API или библиотеками, старайся найти и использовать официальную документацию (как для HH API), чтобы получить точные модели данных/схемы и правила работы.**
    - **Если необходимо переименовать файл (например, `.js` -> `.ts`), но прямое переименование невозможно: создай новый файл с нужным именем и содержимым, а затем удали старый файл.**
    - **Для стандартных задач внутри пакета (сборка JS/TS, запуск dev/prod сервера Node.js, выполнение скриптов Node.js) предпочитай использовать команды, определенные в `scripts` секции `package.json` (например, `pnpm run build`, `pnpm run start`), вместо прямого вызова `node`, `tsc` и т.п. Команды для управления Docker (`docker-compose`, `docker build`) обычно выполняются напрямую.**
    - **При изменении структуры данных, передаваемых между бэкендом и фронтендом (API):**
    - **  1) Всегда обновляй соответствующий интерфейс DTO в `shared/types`.**
    - **  2) В рамках одного логического изменения (например, одного коммита), обязательно проверяй и обновляй и код бэкенда (формирующий ответ API), и код фронтенда (обрабатывающий ответ API), чтобы они строго соответствовали этому DTO.**

# Правила работы с Git.
Gitflow:
  - |
    - Коммиты должны быть атомарными и логически разделенными.
    - Используй формат conventional commits: `feat:`, `fix:`, `docs:`, `refactor:`, `chore:`, `style:`, `test:`, `build:`, `ci:`.
    - Перед выполнением `git commit` или `git push` необходимо получить явное разрешение.
    - Соблюдай правила из `.gitignore` (не добавляй `node_modules`, `.env`, файлы IDE и т.д.).
    - После предложения коммита (или серии коммитов) **всегда** предлагай выполнить `git status`, чтобы убедиться, что не осталось незакоммиченных изменений или неотслеживаемых файлов. Если `git status` показывает оставшиеся изменения/файлы, предложи добавить их в следующий коммит (или создать новый, если они логически не связаны).

# Руководство по стилю и структуре проекта.
Styleguide:
  - |
    - Используй русский язык во всех комментариях к коду и в сообщениях.
    - Соблюдай принятый в проекте стиль кода (форматирование, именование и т.д.).
    - Комментарии должны объяснять **ЗАЧЕМ** написан код (его цель, бизнес-логика) или **ПОЧЕМУ** выбрано нетривиальное решение, а **не КАК** он работает (это должно быть видно из самого кода).
    - Код должен стремиться быть самодокументируемым. Поясняй только **неочевидные** моменты.
    - Комментарии, раскрывающие смысл констант или "магических" значений (например, `// ID региона "Россия" на HH.ru`), **допустимы**.
    - **НЕ** оставляй комментарии-советы, предположения или объяснения очевидного (например, `// Используем константу`).
    - **НЕ** оставляй закомментированный код.

  - |
    Технологический стек:
      - Backend: Node.js (v18.x), Express, Mongoose, TypeScript
      - Frontend: SvelteKit, Vite (v5.x), TypeScript
      - Database: MongoDB (v7.x)
      - Containerization: Docker, Docker Compose (v3.x)
      - Package Manager: pnpm (v8.x)

  - |
    Структура проекта (основные директории):
      - `/backend`: API на Node.js/Express, модели Mongoose, роуты, сервисы.
      - `/frontend`: Интерфейс на SvelteKit, компоненты, страницы, сервисный слой.
      - `/shared`: Общий код (типы, константы) для backend и frontend.
        - Типы, используемые для обмена данными между frontend и backend (DTO - Data Transfer Objects), помещаются в `shared/types`.
        - Для имен интерфейсов DTO используется суффикс `DTO` (например, `VacancyDTO`).
        - Типы, специфичные для backend (например, связанные с Mongoose), остаются в `/backend`.
        - Типы, специфичные для frontend (например, пропсы компонентов), остаются в `/frontend`.
      - `/data`: Данные для Docker volumes (например, MongoDB).
      - `docker-compose.yml`: Конфигурация Docker.
      - `README.md`: Основная документация (всегда актуальна!).

  - |
    Ключевые команды для запуска и управления проектом:
      - Запуск всего стека (Docker): `docker-compose up --build -d`
      - Остановка стека: `docker-compose down`
      - Остановка с удалением томов: `docker-compose down -v`
      - Заполнение БД тестовыми данными: `docker-compose exec backend node data/seedDatabase.js`
      - Локальный запуск frontend (dev): `cd frontend && pnpm install && pnpm run dev`
      - Установка зависимостей: `pnpm install`

  - |
    Важное правило:
      - Перед тем, как ссылаться на файл или директорию в своих ответах или коде, всегда проверяй их реальное существование в проекте с помощью инструментов чтения или листинга директорий.