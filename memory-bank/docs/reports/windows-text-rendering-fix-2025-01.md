# üéØ Windows Text Rendering Fix - TagBubblesCanvas

**–î–∞—Ç–∞:** –Ø–Ω–≤–∞—Ä—å 2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –†—ã–≤–∫–∏ –∏ –ø–æ–¥–µ—Ä–≥–∏–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤ –ø—É–∑—ã—Ä—è—Ö TagBubblesCanvas –Ω–∞ Windows  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û  

## üîç **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã**

**–ò–∑–Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:** –ü—Ä–æ–±–ª–µ–º–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ "–¥—ã—Ö–∞–Ω–∏—è" –ø—É–∑—ã—Ä–µ–π  
**–†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–µ–∫—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ –ø—É–∑—ã—Ä–µ–π –Ω–∞ Windows  

### –ü—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:
1. **DPI Scaling**: Windows –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç high-DPI –¥–∏—Å–ø–ª–µ–∏ –∏–Ω–∞—á–µ —á–µ–º macOS
2. **Font Rendering**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Canvas 2D context –¥–ª—è —Ç–µ–∫—Å—Ç–∞  
3. **Subpixel Positioning**: –¢–µ–∫—Å—Ç —Ä–µ–Ω–¥–µ—Ä–∏–ª—Å—è –Ω–∞ –Ω–µ—Ü–µ–ª—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö
4. **Font Smoothing**: –ù–µ –≤–∫–ª—é—á–µ–Ω–æ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ –¥–ª—è Canvas

## üõ†Ô∏è **–†–ï–í–û–õ–Æ–¶–ò–û–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï: –ì–∏–±—Ä–∏–¥–Ω—ã–π Canvas + HTML –ø–æ–¥—Ö–æ–¥**

> **–ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ**: –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞–∑ –æ—Ç Canvas text rendering –≤ –ø–æ–ª—å–∑—É HTML overlay —Å CSS transitions

### üéØ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**

**–ü–†–û–ë–õ–ï–ú–ê**: Canvas text rendering –Ω–µ—Å—Ç–∞–±–∏–ª–µ–Ω –Ω–∞ Windows, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π  
**–†–ï–®–ï–ù–ò–ï**: –†–∞–∑–¥–µ–ª–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ - Canvas –¥–ª—è –ø—É–∑—ã—Ä–µ–π, HTML –¥–ª—è —Ç–µ–∫—Å—Ç–∞

### 1. **Canvas —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—É–∑—ã—Ä–µ–π**
```javascript
// –£–±—Ä–∞–Ω –≤–µ—Å—å –∫–æ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Ç–µ–∫—Å—Ç–∞ –∏–∑ drawBubble()
function drawBubble(context, bubble, isHovered) {
  // –¢–æ–ª—å–∫–æ circle + gradient, –ë–ï–ó –¢–ï–ö–°–¢–ê!
  context.arc(bubble.x, bubble.y, bubble.currentRadius, 0, Math.PI * 2);
  context.fill();
}
```

### 2. **HTML overlay –¥–ª—è —Ç–µ–∫—Å—Ç–∞**
```html
<!-- –ê–±—Å–æ–ª—é—Ç–Ω–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π overlay -->
<div class="text-overlay">
  <div class="bubble-text" style="left: {x}px; top: {y}px;">
    {text}
  </div>
</div>
```

### 3. **CSS transitions –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏**
```css
.bubble-text {
  transition: all 0.15s ease-out;
  transform: translate(-50%, -50%);
  will-change: transform;
  -webkit-font-smoothing: antialiased;
}
```

### 4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JavaScript**
```javascript
function updateTextOverlay() {
  textOverlay.innerHTML = bubbles.map(bubble => 
    `<div style="left: ${bubble.x}px; top: ${bubble.y}px;">${bubble.name}</div>`
  ).join('');
}
```

### ‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**
- **GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ**: CSS transitions –∏—Å–ø–æ–ª—å–∑—É—é—Ç GPU
- **–ù–∞—Ç–∏–≤–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ**: –±—Ä–∞—É–∑–µ—Ä –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç HTML —Ç–µ–∫—Å—Ç
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: HTML —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –æ–¥–∏–Ω–∞–∫–æ–≤ –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: Canvas —Ä–µ–Ω–¥–µ—Ä–∏—Ç –º–µ–Ω—å—à–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã**

### ‚úÖ **–£–ª—É—á—à–µ–Ω–∏—è:**
- **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—Ä–æ–∂–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞**: –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ MDN —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ –∏–∑–±–µ–≥–∞–Ω–∏—é —Å—É–±–ø–∏–∫—Å–µ–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: —É–±—Ä–∞–Ω—ã —Å–ª–æ–∂–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∑–∞–º–µ–¥–ª—è–≤—à–∏–µ –∞–Ω–∏–º–∞—Ü–∏—é
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö
- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**: —á–µ—Ç–∫–∏–π —Å–∏—Å—Ç–µ–º–Ω—ã–π —à—Ä–∏—Ñ—Ç –±–µ–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

### üìä **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
- **–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–π —Ñ–∞–π–ª**: `frontend/src/lib/components/TagBubblesCanvas.svelte`
- **–ü–æ–¥—Ö–æ–¥**: –£–ø—Ä–æ—â–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è (—Å–ª–µ–¥—É—è –ø—Ä–∏–Ω—Ü–∏–ø—É KISS)
- **–û—Å–Ω–æ–≤–∞ —Ä–µ—à–µ–Ω–∏—è**: MDN —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è "Avoid floating-point coordinates"
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏—Å—Ö–æ–¥–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏

## üîß **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

```bash
# –ó–∞–ø—É—Å–∫ development —Å—Ä–µ–¥—ã
make d

# –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
# Frontend: http://localhost:3000
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -> TagBubblesCanvas
```

## üìù **–ü—Ä–∏–º–µ—á–∞–Ω–∏—è**

**–í–∞–∂–Ω–æ**: –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞ –¥–ª—è Windows –∏ —Å–≤—è–∑–∞–Ω–∞ —Å —Ä–∞–∑–ª–∏—á–∏—è–º–∏ –≤ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ Canvas 2D —Ç–µ–∫—Å—Ç–∞ –º–µ–∂–¥—É –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç:

1. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ** –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö
2. **–û–ø—Ç–∏–º–∞–ª—å–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞
3. **–ë—É–¥—É—â—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å –Ω–æ–≤—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ –±—Ä–∞—É–∑–µ—Ä–æ–≤

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£ 